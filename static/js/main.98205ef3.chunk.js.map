{"version":3,"sources":["js/helpers/Globals.js","js/functions/PlayIcon.js","js/classes/Blob.js","audio/blobs-no-2.ogg","audio/blobs-no-2.mid","js/P5SketchWithAudio.js","js/App.js","index.js"],"names":["window","p5","PlayIcon","_jsxs","id","className","xmlns","height","viewBox","width","children","_jsx","d","fill","Blob","constructor","p","x","y","parseSVGPath","pathData","commands","match","pathArray","cmd","command","charAt","params","slice","split","map","Number","push","this","speed","size","growth","parseInt","random","edges","seed","fillHue","strokeHue","rotationAngle","rotationDirection","Math","canRotate","path","blobshape","update","draw","translateX","translateY","translate","rotate","stroke","beginShape","vertex","quadraticVertex","endShape","CLOSE","pop","P5SketchWithAudio","sketchRef","useRef","Sketch","canvas","canvasWidth","innerWidth","canvasHeight","innerHeight","audioLoaded","player","PPQ","loadMidi","Midi","fromUrl","midi","then","result","console","log","noteSet1","tracks","notes","scheduleCueSet","document","getElementById","classList","add","remove","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","poly","arguments","length","undefined","lastTicks","currentCue","i","note","ticks","time","addCue","blobsArray","setup","createCanvas","bgHue","hueSet","colorMode","HSB","angleMode","DEGREES","background","strokeWeight","blob","isPlaying","executeCueSet1","hasStarted","mousePressed","pause","currentTime","buffer","duration","reset","dataLayer","title","location","href","addClass","play","creditsLogged","stop","updateCanvasDimensions","resizeCanvas","attachEvent","addEventListener","useEffect","current","ref","App","ReactDOM","render","React","StrictMode"],"mappings":"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","file":"static/js/main.98205ef3.chunk.js","sourcesContent":["// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","export default function PlayIcon() {\n    return (\n        <svg id=\"play-icon\" className='fade-out' xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n        </svg>\n    )\n}\n","import blobshape from \"blobshape\";\r\n\r\n//p.hueSet = [30, 90, 150, 210, 270, 330];\r\n\r\nexport default class Blob {\r\n\r\n    constructor(p, x, y) {\r\n        this.p = p;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.speed = 6;\r\n        this.size = p.width / 8;\r\n        this.growth = parseInt(p.random(3, 9));\r\n        this.edges = parseInt(p.random(16, 32));\r\n        this.seed =  p.random(1, 100);\r\n        this.fillHue = p.random(0, 360);\r\n        this.strokeHue = p.random(0, 360);\r\n        this.rotationAngle = 0;\r\n        this.rotationDirection = Math.random() > 0.5 ? 'clockwise' : 'anti-clockwise';\r\n        this.canRotate = Math.random() > 0.5;\r\n        const { path } = blobshape({ size: this.size, growth: this.growth, edges: this.edges, seed: this.seed });\r\n        this.pathArray = this.parseSVGPath(path);\r\n    }\r\n\r\n    \r\n    parseSVGPath = (pathData) => {\r\n        let commands = pathData.match(/[a-df-z][^a-df-z]*/gi);\r\n        let pathArray = [];\r\n        \r\n        for (let cmd of commands) {\r\n            let command = cmd.charAt(0);\r\n            let params = cmd.slice(1).split(/[\\s,]+/).map(Number);\r\n            pathArray.push([command, ...params]);\r\n        }\r\n        \r\n        return pathArray;\r\n    }\r\n\r\n    update () {\r\n        this.size = this.size + this.speed;\r\n        this.rotationAngle = this.rotationDirection === 'clockwise' ? this.rotationAngle + (this.speed / 24) : this.rotationAngle - (this.speed / 24);\r\n        const { path } = blobshape({ size: this.size, growth: this.growth, edges: this.edges, seed: this.seed });\r\n        this.pathArray = this.parseSVGPath(path);\r\n    }\r\n\r\n    draw () {\r\n        const translateX = this.x - (this.size / 2);\r\n        const translateY = this.y - (this.size / 2);\r\n        \r\n        this.p.push();\r\n        this.p.translate(translateX, translateY);\r\n        if(this.canRotate) {\r\n            this.p.rotate(this.rotationAngle);\r\n        }\r\n        this.p.fill(\r\n            this.fillHue,\r\n            100,\r\n            100,\r\n            0.33\r\n        );\r\n        this.p.stroke(\r\n            this.strokeHue,\r\n            100,\r\n            100,\r\n            0.66\r\n        );\r\n        this.p.beginShape();\r\n        for (let cmd of this.pathArray) {\r\n            let command = cmd[0];\r\n            let params = cmd.slice(1);\r\n            \r\n            if (command === 'M') {\r\n                this.p.vertex(params[0], params[1]);\r\n            } else if (command === 'Q') {\r\n                this.p.quadraticVertex(params[0], params[1], params[2], params[3]);\r\n            }\r\n        }\r\n        this.p.endShape(this.p.CLOSE);\r\n        this.p.translate(-translateX, -translateY);\r\n        this.p.pop();\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/blobs-no-2.7c202732.ogg\";","export default __webpack_public_path__ + \"static/media/blobs-no-2.f6eea4db.mid\";","import React, { useRef, useEffect } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\nimport PlayIcon from './functions/PlayIcon.js';\nimport Blob from './classes/Blob.js';\n\nimport audio from \"../audio/blobs-no-2.ogg\";\nimport midi from \"../audio/blobs-no-2.mid\";\n\n/**\n * Blobs No. 2\n */\nconst P5SketchWithAudio = () => {\n    const sketchRef = useRef();\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    console.log(result);\n                    const noteSet1 = result.tracks[7].notes; // Combintor 1 \n                    p.scheduleCueSet(noteSet1, 'executeCueSet1');\n                    p.audioLoaded = true;\n                    document.getElementById(\"loader\").classList.add(\"loading--complete\");\n                    document.getElementById(\"play-icon\").classList.remove(\"fade-out\");\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, poly = false)  => {\n            let lastTicks = -1,\n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || poly){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        }\n\n        p.blobsArray = [];\n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.bgHue = p.random(p.hueSet);\n            p.colorMode(p.HSB);\n            p.angleMode(p.DEGREES);\n            p.background(0, 0, 0);\n            p.stroke(0, 0, 100);\n            p.strokeWeight(p.width / 256);\n\n            p.blob = new Blob(p, p.width / 2, p.height/ 2);\n        }\n\n        p.draw = () => {\n            if(p.audioLoaded && p.song.isPlaying()){\n                p.background(0, 0, 0);\n                for (let i = 0; i < p.blobsArray.length; i++) {\n                    const blob = p.blobsArray[i];\n                    blob.draw();\n                    blob.update();\n                }\n            }\n        }\n\n\n        p.executeCueSet1 = () => {\n            const x = p.random(p.width / 2 - p.width / 8, p.width / 2 + p.width / 8);\n            const y = p.random(p.height / 2 - p.height / 8, p.height / 2 + p.height / 8);\n            p.blobsArray.push(\n                new Blob(p, x, y)\n            );\n        }\n\n        p.hasStarted = false;\n\n        p.mousePressed = () => {\n            if(p.audioLoaded){\n                if (p.song.isPlaying()) {\n                    p.song.pause();\n                } else {\n                    if (parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)) {\n                        p.reset();\n                        if (typeof window.dataLayer !== typeof undefined){\n                            window.dataLayer.push(\n                                { \n                                    'event': 'play-animation',\n                                    'animation': {\n                                        'title': document.title,\n                                        'location': window.location.href,\n                                        'action': 'replaying'\n                                    }\n                                }\n                            );\n                        }\n                    }\n                    document.getElementById(\"play-icon\").classList.add(\"fade-out\");\n                    p.canvas.addClass(\"fade-in\");\n                    p.song.play();\n                    if (typeof window.dataLayer !== typeof undefined && !p.hasStarted){\n                        window.dataLayer.push(\n                            { \n                                'event': 'play-animation',\n                                'animation': {\n                                    'title': document.title,\n                                    'location': window.location.href,\n                                    'action': 'start playing'\n                                }\n                            }\n                        );\n                        p.hasStarted = false\n                    }\n                }\n            }\n        }\n\n        p.creditsLogged = false;\n\n        p.logCredits = () => {\n            if (\n                !p.creditsLogged &&\n                parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)\n            ) {\n                p.creditsLogged = true;\n                    console.log(\n                    \"Music By: http://labcat.nz/\",\n                    \"\\n\",\n                    \"Animation By: https://github.com/LABCAT/\"\n                );\n                p.song.stop();\n            }\n        };\n\n        p.reset = () => {\n\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.canvas = p.resizeCanvas(p.canvasWidth, p.canvasHeight);\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    useEffect(() => {\n        new p5(Sketch, sketchRef.current);\n    }, []);\n\n    return (\n        <div ref={sketchRef}>\n            <PlayIcon />\n        </div>\n    );\n};\n\nexport default P5SketchWithAudio;\n","import P5SketchWithAudio from './P5SketchWithAudio'\n\nfunction App() {\n  return (\n    <P5SketchWithAudio/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/build.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}